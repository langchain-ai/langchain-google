# -----------------------------------------------------------------------------
# PR Title Lint Workflow
#
# Purpose:
#   Enforces Conventional Commits format for pull request titles to maintain a
#   clear, consistent, and machine-readable change history across our repository.
#   This helps with automated changelog generation and semantic versioning.
#
# Enforced Commit Message Format (Conventional Commits 1.0.0):
#   <type>[optional scope]: <description>
#   [optional body]
#   [optional footer(s)]
#
# Allowed Types:
#   ‚Ä¢ feat       ‚Äî a new feature (MINOR bump)
#   ‚Ä¢ fix        ‚Äî a bug fix (PATCH bump)
#   ‚Ä¢ docs       ‚Äî documentation only changes
#   ‚Ä¢ style      ‚Äî formatting, missing semi-colons, etc.; no code change
#   ‚Ä¢ refactor   ‚Äî code change that neither fixes a bug nor adds a feature
#   ‚Ä¢ perf       ‚Äî code change that improves performance
#   ‚Ä¢ test       ‚Äî adding missing tests or correcting existing tests
#   ‚Ä¢ build      ‚Äî changes that affect the build system or external dependencies
#   ‚Ä¢ ci         ‚Äî continuous integration/configuration changes
#   ‚Ä¢ chore      ‚Äî other changes that don't modify src or test files
#   ‚Ä¢ revert     ‚Äî reverts a previous commit
#   ‚Ä¢ release    ‚Äî prepare a new release
#
# Allowed Scope(s) (optional):
#   genai, vertexai, community, infra
#
# Multiple scopes can be used by separating them with a comma.
#
# Rules & Tips for New Committers:
#   1. Subject (type) must start with a lowercase letter and, if possible, be
#      followed by a scope wrapped in parenthesis `(scope)`
#   2. Breaking changes:
#        ‚Äì Append "!" after type/scope (e.g., feat!: drop Node 12 support)
#        ‚Äì Or include a footer "BREAKING CHANGE: <details>"
#   3. Example PR titles:
#        feat(genai): add multi‚Äêtenant support
#        fix(vertex): resolve flag parsing error
#        feat(vertex)!: drop string support for invoke
#        docs: update API usage examples
#        docs(community): update API usage examples
#
# Resources:
#   ‚Ä¢ Conventional Commits spec: https://www.conventionalcommits.org/en/v1.0.0/
# -----------------------------------------------------------------------------

name: "üè∑Ô∏è PR Title Lint"

permissions:
  pull-requests: read

on:
  pull_request:
    types: [opened, edited, synchronize]

jobs:
  # Validates that PR title follows Conventional Commits specification
  lint-pr-title:
    name: "Validate PR Title Format"
    runs-on: ubuntu-latest
    steps:
      - name: "‚úÖ Validate Conventional Commits Format"
        uses: amannn/action-semantic-pull-request@v6
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          types: |
            feat
            fix
            docs
            style
            refactor
            perf
            test
            build
            ci
            chore
            revert
            release
          scopes: |
            genai
            vertexai
            community
            infra
          requireScope: false
          disallowScopes: |
            release
            [A-Z]+
          ignoreLabels: |
            ignore-lint-pr-title
